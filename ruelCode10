  const handleAddConditionWithinGroup = (groupIndex) => {
    setAllData((prevData) => {
      const newData = [...prevData];
      const newCondition = { ...conditionData, selectCondition: 'default' };
      
      // Enable the selectCondition dropdown for the newly added condition within the group
      newCondition.selectConditionDisabled = false;

      newData[groupIndex].conditions.push(newCondition);

      return newData;
    });
  };

  const handleConditionChange = (field, value, index, conditionIndex) => {
    setAllData((prevData) => {
      const newData = [...prevData];
      newData[index][field] = value;

      if (field === 'selectCondition' && conditionIndex !== undefined) {
        // Enable the selectCondition dropdown for the condition within the group
        newData[index].conditions[conditionIndex].selectConditionDisabled = false;
      }

      if (field === 'selectCondition' && conditionIndex === undefined) {
        // Enable the selectCondition dropdown for the top-level condition
        newData[index].selectConditionDisabled = false;
      }

      // If changing selectCondition, reset the subsequent fields
      if (field === 'selectCondition') {
        newData[index].requestAttribute = 'select';
        newData[index].requestOp = 'default';
        newData[index].requestValue = '';
      }

      return newData;
    });
  };
